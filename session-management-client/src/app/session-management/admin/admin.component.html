<section id="admin">
    <div class="top-border">
        <div class="menubar-details">
            <div class="app-details">
                <span class="first-letter">SV</span>
                <span class="menubar-topic">Session Vault</span>
            </div>
            <div class="user-details" (click)="op.toggle($event)">
                <span class="first-letter">A</span>
                <span class="menubar-topic">Ajith</span>
            </div>
        </div>
    </div>
    <div class="wrapper">
        <div class="background">
            <span class="header">User session details</span>
            <div class="btn-details">
                <div class="search">
                    <p-iconField iconPosition="left">
                        <p-inputIcon styleClass="pi pi-search" />
                        <input (ngModelChange)="search.next($event)" [(ngModel)]="searchText" type="text" pInputText placeholder="Search" />
                    </p-iconField>
                </div>
                <div class="calender-add">
                    <div class="calender">
                        <p-calendar [(ngModel)]="selectDate" placeholder="Choose Date" dateFormat="dd-mm-yy" [iconDisplay]="'input'"
                            [showIcon]="true" inputId="icondisplay" (ngModelChange)="selectedDate()" />
                    </div>
                </div>
            </div>
            <div class="table">
                <p-table [value]="useSessionDetails" [lazy]="true" [columns]="adminCols" selectionMode="single"
                    [scrollable]="true" scrollHeight="260px">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns">
                                {{ col.header }}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-columns="columns">
                        <tr [ngStyle]="{ 'cursor': 'pointer'}">
                            <!-- <td *ngFor="let col of columns" rowData.approvalId != 3 ? (click)="openPopUpModal(rowData)" : >
                                <ng-container *ngIf="col.field != 'approvalId' && col.field != 'remove'">
                                    {{ rowData[col.field] ? rowData[col.field] : '-' }}
                                </ng-container>
                                <ng-container *ngIf="col.field == 'approvalId'">
                                    <span [ngStyle]="rowData[col.field] == 1 ? {'color': '#1E6AD2'} : rowData[col.field] == 2 ? {'color': '#27AE60'} : {'color': '#EB5757'}">
                                        {{ rowData[col.field] === 1 ? 'Pending' : rowData[col.field] === 2 ? 'Approved' : 'Rejected' }}
                                    </span>
                                </ng-container>
                            </td> -->
                            <td *ngFor="let col of columns" (click)="rowData.approvalId !== 3 ? openPopUpModal(rowData) : rejectPopUp()">
                                <ng-container *ngIf="col.field !== 'approvalId' && col.field !== 'remove'">
                                    {{ rowData[col.field] ? rowData[col.field] : '-' }}
                                </ng-container>
                                <ng-container *ngIf="col.field === 'approvalId'">
                                    <span [ngStyle]="rowData[col.field] === 1 ? {'color': '#1E6AD2'} : rowData[col.field] === 2 ? {'color': '#27AE60'} : {'color': '#EB5757'}">
                                        {{ rowData[col.field] === 1 ? 'Pending' : rowData[col.field] === 2 ? 'Approved' : 'Rejected' }}
                                    </span>
                                </ng-container>
                            </td>
                            
                        </tr>
                    </ng-template>
                </p-table>
                <div *ngIf="!useSessionDetails.length" class="no-data">
                    No data found.
                </div>
            </div>
        </div>
    </div>
    <p-dialog header="Header" draggable="false" [modal]="true" [(visible)]="approvalDialogBox" [style]="{ width: '30rem' }" >
        <div class="sessionFrom-form" [formGroup]="adminDetailsForm">
            <div class="fields" *ngIf="pendingFlag">
                <label class="required label">Status</label>
                <p-dropdown appendTo="body" placeholder="Choose Status" [options]="approvalDetails"
                    formControlName="approvalId" optionLabel="name" optionValue="id" (ngModelChange)="selectEvent($event)"></p-dropdown>
                <div class="error-message"
                    *ngIf="(adminForm['approvalId'].dirty || adminForm['approvalId'].touched) && adminForm['approvalId'].invalid">
                    <span *ngIf="adminForm['approvalId'].errors?.['required']">Status is required</span>
                </div>
            </div>
            <div class="fields" *ngIf="approvalEventFlag">
                <label class="label">From Time</label>
                <p-calendar appendTo="body" formControlName="fromTime" placeholder="Choose From Time" [timeOnly]="true" [hourFormat]="'12'" inputId="timeonly"></p-calendar>
            </div>
            <div class="fields" *ngIf="approvalEventFlag">
                <label class="label">To Time</label>
                <p-calendar appendTo="body" formControlName="toTime" placeholder="Choose To Time" [timeOnly]="true" [hourFormat]="'12'" inputId="timeonly"></p-calendar>
            </div>
        </div>
        <ng-template pTemplate="footer">
            <div class="all-btn">
                <div class="back-btn">
                    <p-button label="Cancel" (click)="cancel()"></p-button>
                </div>
                <div class="sidenav-btn">
                    <p-button label="Save" (click)="saveAdminApproval()"></p-button>
                </div>
            </div>
        </ng-template>
    </p-dialog>
    <p-overlayPanel #op>
        <div class="logout" (click)="logout()">
            <span>Log Out</span>
        </div>
    </p-overlayPanel>
</section>
